!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="58818abb-89cc-4e37-88b7-9d1e2b93ace1",e._sentryDebugIdIdentifier="sentry-dbid-58818abb-89cc-4e37-88b7-9d1e2b93ace1")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5933],{65933:function(e,t,r){"use strict";r.d(t,{F:function(){return A}});var n=r(97458),a=r(34854),l=r(66827),s=r(57291),u=r(51780),o=r(52983),i=r(21009),c=r(45591),d=r(21488),f=r(770),b=r(96065),h=r(18503);let v=(0,o.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("button",{...a,ref:t,className:(0,h.m)("$absolute $right-0 lg:$right-15 $-top-45 lg:$top-20 $text-white $flex $items-center $justify-center $rounded-sm $bg-transparent hover:$bg-surface-0/20 w-[45px] h-[45px]",r),children:(0,n.jsx)(f.J,{as:b.Z})})});var m=r(7616),g=r(1850),x=r(27995);let $=()=>{let e=(0,m.b9)(x.lS),t=(0,m.b9)(x.SD),r=(0,m.b9)(x.he),n=(0,u.useRouter)();return(0,o.useCallback)(function(){let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e(!1),t(!1),r(null),a&&n.back()},[n,r,t,e])},p=()=>{let e=(0,u.useRouter)(),t=(0,c.Zk)();(0,o.useEffect)(()=>{let r=(e,r)=>{let{shallow:n}=r;n||t()};return e.events.on("routeChangeComplete",r),()=>{e.events.off("routeChangeComplete",r)}},[t,e])},k=()=>{let e=(0,c.Mr)(),t=(0,u.useRouter)(),r=(0,c.aJ)(),n=$(),a=(0,m.Dv)(x.lS);return p(),t.beforePopState(t=>{let{as:l,options:s}=t,{shallow:u}=s;if(a)return n(),!0;if(!u)return!0;if(r&&l.endsWith(r.as))return e(null),!0;let o=C.safeParse(l);return e(o.success?o.data:null),!1}),null},C=g.z.string().min(4).max(255).transform((e,t)=>{try{var r,n;let t=null===(n=e.split("#").shift())||void 0===n?void 0:null===(r=n.split("_").pop())||void 0===r?void 0:r.replace(".htm","");return g.z.coerce.number().parse(t).valueOf()}catch(e){return t.addIssue({code:g.z.ZodIssueCode.custom,message:"ID could not be extracted from code"}),g.z.NEVER}});var w=r(34224),y=r(39266);r(14723);let j={Prev:y.Z,Next:w.Z},S=(0,o.forwardRef)((e,t)=>{let{direction:r,...a}=e;return(0,n.jsx)("button",{...a,className:(0,h.m)("_1rmnktx0 $w-45 $h-45 $absolute $top-1/2 $text-white $flex $items-center $justify-center $rounded-sm $bg-transparent hover:$bg-surface-0/20 $z-3","Prev"===r&&"$left-15","Next"===r&&"$right-15"),ref:t,"data-cy":"".concat("Prev"===r?"prev":"next","-video"),children:(0,n.jsx)(f.J,{as:j[r]})})}),E=e=>{let{urlDetailGenerator:t}=e,[r,a]=(0,c.iA)(),{previousResource:l,nextResource:s}=(0,c.CY)(t);return(N(l,s),l||s)?(0,n.jsxs)("nav",{className:"$hidden lg:$block",children:[(0,n.jsx)(S,{direction:"Prev",onClick:l,disabled:!l||r}),(0,n.jsx)(S,{direction:"Next",onClick:s,disabled:!s||r})]}):null},N=(e,t)=>{let[r]=(0,c.iA)();(0,o.useEffect)(()=>{let n=n=>{!r&&("ArrowLeft"===n.key?e&&e():"ArrowRight"===n.key&&t&&t())};return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[e,t,r])};r(44251);var D=r(22319),R=(0,D.c)({defaultClassName:"_btqskg7 _btqskg6 $pb-50 lg:$pb-20 $rounded-none lg:$rounded-md $mt-45 lg:$mt-0 $h-full bg-surface-0 dark:bg-surface-1 $px-20 $pt-0 sm:$pt-30",variantClassNames:{isOnboardingEnabled:{true:"$overflow-hidden $pointer-events-none",false:"$overflow-y-scroll"}},defaultVariants:{isOnboardingEnabled:!1},compoundVariants:[]}),_=(0,D.c)({defaultClassName:"_btqskg3 $px-0 lg:$px-70 $mx-auto $relative $h-full $mt-20",variantClassNames:{size:{base:"$w-[1400px] $max-w-[100vw] xl:$max-w-full",lg:"$max-w-[2060px] w-full"}},defaultVariants:{size:"base"},compoundVariants:[]}),I=(0,D.c)({defaultClassName:"_btqskg0 $[contain:layout] $fixed $inset-0 $z-2 $bg-black $justify-center $items-center $block lg:$flex",variantClassNames:{overlay:{base:"bg-neutral-900/90",black:"$bg-black"}},defaultVariants:{overlay:"base"},compoundVariants:[]});let O=e=>{let{children:t,open:r,onOpenChange:a}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k,{}),(0,n.jsx)(l.fC,{open:r,onOpenChange:a,modal:!0,children:(0,n.jsx)(l.aV,{className:I({overlay:"base"}),children:(0,n.jsx)(l.VY,{className:_(),onInteractOutside:e=>e.preventDefault(),children:(0,n.jsx)("div",{className:R({isOnboardingEnabled:!0}),children:t})})})})]})},V=(0,s.cx)("overflow-y-auto scrollbar-thin transition-all duration-150 ease-in-out scroll-smooth [scrollbar-gutter:stable] scrollbar-track-transparent scrollbar-thumb-transparent hover:scrollbar-thumb-[#9CA3AF] hover:scrollbar-track-[#F3F4F6] dark:scrollbar-thumb-transparent dark:scrollbar-track-transparent dark:hover:scrollbar-thumb-[#666] dark:hover:scrollbar-track-[#1e1e1e]"),A=e=>{let{urlDetailGenerator:t,children:r,dialogContentClassName:u,showCloseButton:c=!0,showNavigation:d=!0,outSideClick:f=!0,modalType:b,size:h="base"}=e,m=q(b),g=P(),x=z();(0,a.$6)(m);let{isEditToolsOnboardingEnabled:$}=(0,i.Yj)(),p=(0,o.useCallback)(e=>{let t=e.target;t&&"dialog"===t.getAttribute("role")&&g()},[g]),C=e=>{e.preventDefault()};return $?(0,n.jsx)(O,{open:m,onOpenChange:g,children:r}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k,{}),(0,n.jsx)(l.fC,{open:m,onOpenChange:g,modal:!0,children:(0,n.jsx)(l.aV,{className:I(),onClick:p,children:(0,n.jsxs)(l.VY,{className:null!=u?u:_({size:h}),...!f&&{onPointerDownOutside:C,onInteractOutside:C},children:[c&&(0,n.jsx)(l.x8,{asChild:!0,children:(0,n.jsx)(v,{})}),d&&(0,n.jsx)(E,{urlDetailGenerator:t}),(0,n.jsx)("div",{className:(0,s.cx)(R(),V),ref:x,children:r})]})})})]})},P=()=>{let e=(0,c.Zk)(),{push:t}=(0,u.useRouter)(),r=(0,c.aJ)();return(0,o.useCallback)(()=>{if(null===r){e();return}t({pathname:r.pathname,query:r.query},r.as,{shallow:!0,scroll:!1}).then(()=>{e()})},[e,r,t])},q=e=>{let t=(0,c.bA)(),r=(0,d.l)();return null!==t&&r===e},z=()=>{let e=(0,o.useRef)(null),t=(0,c.bA)();return(0,o.useEffect)(()=>{t&&e.current&&(e.current.scrollTop=0)},[t]),e}},21223:function(e,t,r){"use strict";r.d(t,{e:function(){return n}});let n=(0,r(52983).createContext)(null)},34123:function(e,t,r){"use strict";r.d(t,{S:function(){return x}});var n=r(97458),a=r(51780),l=r(52983),s=r(90925),u=r(24399),o=r(7616),i=r(73139),c=r(6583);let d=(0,u.cn)({}),f=(0,i.xu)(e=>{let{id:t,ethnicity:r}=e;return(0,u.cn)(e=>{if(r)return e(d)["".concat(t,"-").concat(r)]})}),b=e=>{let{id:t}=(0,c.p)();return(0,o.Dv)((0,l.useMemo)(()=>(0,u.cn)(r=>r(f({id:t,ethnicity:e}))),[t,e]))};var h=r(42432),v=r(21223);let m=()=>{let[e,t]=(0,l.useState)(!0),[r,n]=(0,l.useState)(!1),[a,s]=(0,l.useState)();return(0,l.useMemo)(()=>({isChangeEthnicityLoading:r,setIsChangeEthnicityLoading:n,changeEthnicityAnimationEnd:e,setChangeEthnicityAnimationEnd:t,selectedEthnicity:a,setSelectedEthnicity:s}),[r,e,a])},g=()=>{let[e,t]=(0,l.useState)(!0),[r,n]=(0,l.useState)(!1),[a,s]=(0,l.useState)(!1);return(0,l.useMemo)(()=>({isRemoveBackgroundLoading:r,setIsRemoveBackgroundLoading:n,removeBackgroundAnimationEnd:e,setRemoveBackgroundAnimationEnd:t,forceRemoveBackgroundButtonTooltip:a,setForceRemoveBackgroundButtonTooltip:s}),[a,r,e])},x=e=>{let{children:t}=e,{asPath:r}=(0,a.useRouter)(),[u,o]=(0,l.useState)(),[i,c]=(0,l.useState)("original"),[d,f]=(0,l.useState)(void 0),[x,$]=(0,l.useState)(void 0),[p,k]=(0,s.i)(),C=m(),w=g(),{externalUrl:y}=(0,h.Q)(),{setRemoveBackgroundAnimationEnd:j,setIsRemoveBackgroundLoading:S}=w,{setSelectedEthnicity:E,setChangeEthnicityAnimationEnd:N,setIsChangeEthnicityLoading:D,selectedEthnicity:R}=C,_=b(R),I=(0,l.useCallback)(()=>{"transparent"===i&&j(!1),"ethnicity"===i&&N(!1),S(!1),D(!1),c("original"),f(void 0),$(void 0)},[i,N,D,S,j]),O=w.isRemoveBackgroundLoading||C.isChangeEthnicityLoading,V=(0,l.useMemo)(()=>({...w,...C,imagePreviewMode:i,setImagePreviewMode:c,editedImageDimensions:u,setEditedImageDimensions:o,isRemoveBackgroundActive:"transparent"===i,isChangeEthnicityActive:"ethnicity"===i,isExpandActive:"expand"===i,isEditToolsLoading:O,setImageModeToOriginal:I,lastEditedImage:x,lastEditTool:d}),[C,u,i,O,d,x,w,I]);return(0,l.useEffect)(()=>{c("original"),j(!0),E(void 0)},[r,j,E]),(0,l.useEffect)(()=>{"transparent"===i&&($(y),f(i)),"ethnicity"===i&&($(null==_?void 0:_.externalUrl),f(i))},[null==_?void 0:_.externalUrl,i,y]),(0,l.useEffect)(()=>{k(O)},[O,k]),(0,n.jsx)(v.e.Provider,{value:V,children:t})}},86610:function(e,t,r){"use strict";r.d(t,{Sq:function(){return n.S},TV:function(){return a.T},ql:function(){return l.q}});var n=r(34123),a=r(11028),l=r(51518)},11028:function(e,t,r){"use strict";r.d(t,{T:function(){return l}});var n=r(52983),a=r(21223);let l=()=>{let e=(0,n.useContext)(a.e);if(null===e)throw Error("useEditToolsState must be used within a DetailEditToolsContext");return e}},51518:function(e,t,r){"use strict";r.d(t,{q:function(){return l}});var n=r(52983),a=r(11028);let l=()=>{let{isRemoveBackgroundLoading:e,setIsRemoveBackgroundLoading:t,removeBackgroundAnimationEnd:r,setRemoveBackgroundAnimationEnd:l,forceRemoveBackgroundButtonTooltip:s,setForceRemoveBackgroundButtonTooltip:u,isRemoveBackgroundActive:o,changeEthnicityAnimationEnd:i}=(0,a.T)();return(0,n.useMemo)(()=>({isRemoveBackgroundLoading:e,setIsRemoveBackgroundLoading:t,removeBackgroundAnimationEnd:r,setRemoveBackgroundAnimationEnd:l,forceRemoveBackgroundButtonTooltip:s,setForceRemoveBackgroundButtonTooltip:u,isRemoveBackgroundActive:o,changeEthnicityAnimationEnd:i}),[e,t,r,l,s,u,o,i])}},21009:function(e,t,r){"use strict";r.d(t,{Yj:function(){return o},sC:function(){return c}});var n=r(7616),a=r(52983),l=r(64979),s=r(27995);let u=["reimagine","expand","retouch"],o=()=>{let[e,t]=(0,n.KO)(s.P1),[r,o]=(0,n.KO)(s.sz),i=(0,a.useCallback)(()=>{localStorage.removeItem(l.vl),"true"!==localStorage.getItem(l.RJ)&&o(!0)},[o]),c=(0,a.useCallback)(()=>{localStorage.setItem(l.RJ,"true"),o(!1)},[o]),d=(0,a.useCallback)(()=>{if(e===u.length-1){c();return}t(e=>e+1)},[c,e,t]),f=(0,a.useCallback)(()=>{if(0===e){c();return}t(e=>e-1)},[c,e,t]);return(0,a.useMemo)(()=>({isEditToolsOnboardingEnabled:r,enableOnboarding:i,disableOnboarding:c,currentOnboardingTool:u[e],handleGoToNextOnboardingStep:d,handleGoToPreviousOnboardingStep:f,onboardingStep:e,totalSteps:u.length}),[c,i,d,f,r,e])};var i=r(86610);let c=()=>{let{setEditedImageDimensions:e}=(0,i.TV)();return(0,a.useCallback)(t=>{t&&e({width:t.naturalWidth,height:t.naturalHeight})},[e])};r(41868)},41868:function(e,t,r){"use strict";r.d(t,{P:function(){return l}});var n=r(88578),a=r(7616);let l=(e,t)=>((0,a.Dv)(n.UH)||t)&&!e},42432:function(e,t,r){"use strict";r.d(t,{Q:function(){return u}});var n=r(7616),a=r(52983),l=r(6583),s=r(28831);let u=()=>{let{id:e}=(0,l.p)(),{url:t,uuid:r,externalUrl:u}=(0,n.Dv)((0,s.u)(e))||{};return(0,a.useMemo)(()=>({url:t,uuid:r,externalUrl:u}),[u,t,r])}},28831:function(e,t,r){"use strict";r.d(t,{u:function(){return s}});var n=r(24399),a=r(73139);let l=(0,n.cn)({}),s=(0,a.xu)(e=>(0,n.cn)(t=>t(l)[e],(t,r,n)=>{r(l,t=>({...t,[e]:n}))}))},27995:function(e,t,r){"use strict";r.d(t,{P1:function(){return o},SD:function(){return s},he:function(){return l},lS:function(){return a},sz:function(){return u}});var n=r(24399);let a=(0,n.cn)(!1),l=(0,n.cn)(null),s=(0,n.cn)(!1),u=(0,n.cn)(!1),o=(0,n.cn)(0)},14723:function(){},44251:function(){}}]);